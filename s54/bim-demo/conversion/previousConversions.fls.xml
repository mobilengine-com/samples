<?xml version="1.0" encoding="UTF-8"?>
<form xmlns="http://schemas.mobilengine.com/fls/v2" id="previousConversions" menuName="Previous Uploads &amp; Conversions" platforms="web">
	<header />

	<table id='convTable' record="r" recordset='{select c.start, c.input, c.inputFilename, c.output, c.outputFilename, c.end from conversions c order by 1 desc}'>
		<header>
			<row>
				<cell>
					<textview text="Input" />
				</cell>
				<cell>
					<textview text="Output" />
				</cell>
				<cell>
					<textview text="Remove?" />
				</cell>
			</row>
		</header>
		<row>
			<declarations>
				<let id='input' shape='scalar' value='{r.input}' />
			</declarations>
			<cell>
				<filedownload text="{r.inputFilename}" mediaId="{r.input}" />
			</cell>
			<cell>
				<if cond="{(r.end is not null) and (r.output is not null)}">
					<filedownload text="{r.outputFilename}" mediaId="{r.output}" />
				</if>
				<if cond="{(r.end is not null) and (r.output is null)}">
					<textview text="Conversion Failed" />
				</if>
				<if cond="{r.end is null}">
					<textview text="In progress..." />
				</if>
			</cell>
			<cell>
				<checkbox id="remove" />
			</cell>
		</row>
	</table>
	
	<submitbutton text='Remove selected conversions' nextForm='{forms.previousConversions}' />
</form>